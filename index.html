<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Samvidha Login</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  background: linear-gradient(135deg, #241e92, #5432d3, #7a7ef5);
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: bgMove 8s infinite alternate ease-in-out;
}
@keyframes bgMove {
  from { background-position: 0% 50%; }
  to { background-position: 100% 50%; }
}
.glass-card {
  background: rgba(255,255,255,0.06);
  padding: 30px;
  border-radius: 18px;
  backdrop-filter: blur(15px);
  width: 380px;
  color: white;
  border: 1px solid rgba(255,255,255,0.15);
}
.input-box {
  background: rgba(255,255,255,0.08);
  border: none;
  color: white;
}
.input-box:focus {
  outline: none;
  background: rgba(255,255,255,0.12);
}

/* LOADER */
.loader {
  width: 26px;
  height: 26px;
  border: 3px solid rgba(255,255,255,0.4);
  border-top: 3px solid white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  display: none;
  margin: 0 auto;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}
</style>
</head>
<body>

<div class="glass-card">
  <h2 class="text-center mb-4 font-bold">Samvidha Login</h2>

  <form id="loginForm" onsubmit="return false;">

    <label class="mb-1">Username</label>
    <input type="text" id="username" class="form-control input-box mb-3" required>

    <label class="mb-1">Password</label>
    <input type="password" id="password" class="form-control input-box mb-3" required>

    <button type="button" id="loginBtn" class="btn btn-light w-100 mt-3">
      Login
    </button>

    <!-- Loader -->
    <div id="loader" class="loader mt-3"></div>

    <p id="loginError" class="text-danger mt-3 text-center d-none">Invalid credentials</p>
  </form>
</div>

<script>
document.getElementById("loginBtn").addEventListener("click", async () => {

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!username || !password) return;

  // UI Changes (Show Loader + Disable Button)
  const btn = document.getElementById("loginBtn");
  const loader = document.getElementById("loader");
  btn.disabled = true;
  btn.innerText = "Please wait...";
  loader.style.display = "block";

  try {
    const res = await fetch("https://web-production-d582e.up.railway.app/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

    const data = await res.json();

    if (data.success) {
      localStorage.setItem("token", data.token);

      // Redirect
      window.location.href = window.location.origin + "/dashboard";
    } else {
      document.getElementById("loginError").classList.remove("d-none");
    }

  } catch (err) {
    document.getElementById("loginError").classList.remove("d-none");
  }

  // Hide loader and restore button if login fails
  loader.style.display = "none";
  btn.disabled = false;
  btn.innerText = "Login";
});
</script>

</body>
</html>

